# QA Test Report — Deal Tag Validation App
**Run date:** 2026-02-20
**Total tests:** 10 | ✅ Passed: 10 | ⚠️ Partial: 0 | ❌ Failed: 0

## Test Results

| Test | Description | Status | Details |
|------|-------------|--------|---------|
| TC-01 | Missing IOS Tag (AOS+IOS deal, only AOS uploaded) | ✅ PASSED | Plan: 1 deals \| Tags parsed: 1<br>  ✓ Deal TC01_Deal is in plan<br>  ✓ Overall status = FAIL<br>  ✓ Missing platform = ios<br>  ✓ AOS platform found |
| TC-02 | Missing AOS Tag (AOS+IOS deal, only IOS uploaded) | ✅ PASSED | Plan: 1 deals \| Tags parsed: 1<br>  ✓ Overall status = FAIL<br>  ✓ Missing platform = aos<br>  ✓ IOS platform found |
| TC-03 | Both Tags Missing (deal in plan, no mobile tags at all) | ✅ PASSED | Plan: 2 deals \| Tags parsed: 1<br>  ✓ TC03_Deal_Mobile is in deal groups<br>  ✓ TC03_Deal_Mobile status = FAIL<br>  ✓ TC03_Deal_Mobile missing both AOS and IOS<br>  ✓ TC03_Deal_CTV status = PASS |
| TC-04 | Empty Deal Name row in Excel — should be skipped | ✅ PASSED | Plan: 1 deals \| Tags parsed: 1<br>  ✓ Only 1 deal in plan (empty row skipped)<br>  ✓ TC04_RealDeal is present and PASS<br>  ✓ No crash / error |
| TC-05 | Malformed Tag URL (non-https:// value) | ✅ PASSED | Plan: 1 deals \| Tags parsed: 2<br>  ✓ AOS tag with bad URL is parsed (not silently dropped)<br>  ✓ AOS tag flagged as invalid URL<br>  ✓ Deal status = FAIL (bad URL detected)<br>  ✓ IOS tag (valid URL) still found |
| TC-06 | Completely empty row in Excel — should be skipped | ✅ PASSED | Plan: 2 deals \| Tags parsed: 3<br>  ✓ Exactly 2 deals parsed (empty row skipped)<br>  ✓ TC06_Deal_A (CTV) = PASS<br>  ✓ TC06_Deal_B (AOS+IOS) = PASS |
| TC-07 | Duplicate Deal Names in Excel (same deal name twice) | ✅ PASSED | Plan: 1 deals \| Tags parsed: 1<br>  ✓ No crash / error<br>  ✓ Only 1 deal group (deduped by plan)<br>  ✓ TC07_Deal status = PASS (last row wins, AOS matches AOS) |
| TC-08 | Mixed Valid and Invalid (realistic scenario) | ✅ PASSED | Plan: 4 deals \| Tags parsed: 4<br>  ✓ 4 deals in plan<br>  ✓ TC08_Deal_FullMobile = PASS<br>  ✓ TC08_Deal_MissingIOS = FAIL (missing ios)<br>  ✓ TC08_Deal_CTV = PASS<br>  ✓ TC08_Deal_NoneAtAll = FAIL (no tags at all)<br>  ✓ Summary: 2 FAIL, 2 PASS |
| TC-09 | Extra whitespace in tag name — should be trimmed and matched | ✅ PASSED | Plan: 1 deals \| Tags parsed: 2<br>  ✓ TC09_Deal found in plan<br>  ✓ Both AOS and IOS platforms found (trimmed)<br>  ✓ TC09_Deal status = PASS |
| TC-10 | Wrong column headers in Excel — should throw error gracefully | ✅ PASSED | Error thrown: Could not find valid header row (must contain 'Deal Name'/'Deal ID' and 'Device targeted')<br>  ✓ Error is thrown (not silent failure)<br>  ✓ Error message mentions 'header row' |

## Issues Found & Actions Taken

### ✅ TC-01 through TC-03 — Missing tag detection
App correctly identifies missing platform tags and marks deal as FAIL.

### ✅ TC-04 — Empty Deal Name handling
fileParser.ts skips rows with empty Deal Name. No crash.

### ⚠️  TC-05 — Malformed/Missing URL in tag file
**Original behavior (bug):** Block silently dropped → deal appeared as "Tag not uploaded / Missing" with no indication a file was uploaded.
**Fix applied:** `parseAdTagFile` now adds an entry with `vastUrl: "__MISSING_URL__"` so the tag name is tracked and flagged explicitly as "Invalid URL".

### ✅ TC-06 — Empty row in Excel
Parser skips empty rows. Correctly handled.

### ✅ TC-07 — Duplicate Deal Names in Excel
**Behavior:** Last row silently overwrites the first in the plan. No warning shown.
**Action:** Acceptable — duplicate row detection in the Excel media plan is out of scope for tag validation. The tool processes each deal by name; the last occurrence wins.

### ✅ TC-08 — Mixed scenario
Correct PASS/FAIL mix detected across multiple deals.

### ✅ TC-09 — Extra whitespace in tag name
`parseAdTagFile` already calls `l.trim()`. Tags match correctly.

### ✅ TC-10 — Wrong column headers
Parser throws descriptive error: "Could not find valid header row…". App shows alert to user.

*Generated by test_runner.js — 2026-02-20T07:47:04.447Z*